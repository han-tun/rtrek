<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Word counts • rtrek</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Word counts">
<meta property="og:description" content="">
<meta property="og:image" content="https://leonawicz.github.io/rtrek/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-46129458-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-46129458-3');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rtrek</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/rtrek.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/stapi.html">Star Trek API (STAPI)</a>
    </li>
    <li>
      <a href="../articles/memory-alpha.html">Memory Alpha</a>
    </li>
    <li>
      <a href="../articles/memory-beta.html">Memory Beta</a>
    </li>
    <li>
      <a href="../articles/fonts.html">Star Trek fonts</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Examples</li>
    <li>
      <a href="../articles/ex-word-count.html">Novels: word count</a>
    </li>
    <li>
      <a href="../articles/ex-episode-analysis.html">Episodes: spoken lines</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/sc.html">Stellar Cartography</a>
</li>
<li>
  <a href="../articles/rr.html">R &amp; R... &amp; R</a>
</li>
<li>
  <a href="https://github.com/leonawicz/rtrek">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Word counts</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/leonawicz/rtrek/blob/master/vignettes/ex-word-count.Rmd"><code>vignettes/ex-word-count.Rmd</code></a></small>
      <div class="hidden name"><code>ex-word-count.Rmd</code></div>

    </div>

    
    
<p>These examples explore the word counts of published Star Trek novels from 1967 through 2017 based on the <code>stBooks</code> dataset.</p>
<p>First, load packages to assist with data manipulation and plotting.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(lubridate)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggrepel)</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(gridExtra)</a>
<a class="sourceLine" id="cb1-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rtrek) <span class="co"># use &gt;= v0.2.1 for more accurate word count data</span></a></code></pre></div>
<p>Look for trends in word count through time for select series: The Next Generation, Deep Space Nine, and Voyager. Mutating the <code>date</code> and <code>nword</code> columns facilitates a better plot. Retain outliers in general, but drop any titles containing the word “Omnibus” because these are known to be larger books containing multiple individual novels. Inspect the data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">keep_series &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"TNG"</span>, <span class="st">"DS9"</span>, <span class="st">"VOY"</span>)</a>
<a class="sourceLine" id="cb2-2" title="2">x &lt;-<span class="st"> </span><span class="kw">mutate</span>(stBooks, <span class="dt">date =</span> <span class="kw">decimal_date</span>(<span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(date)), <span class="dt">nword =</span> nword <span class="op">/</span><span class="st"> </span><span class="dv">1000</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(series <span class="op">%in%</span><span class="st"> </span>keep_series <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"Omnibus"</span>, title))</a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">arrange</span>(x, nword)</a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt; # A tibble: 266 x 11</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;    title author  date publisher identifier series subseries nchap nword</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  1 Slin~ Terri~ 2008. Simon an~ 1416550240 TNG    &lt;NA&gt;          8  10.7</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  2 Slin~ Keith~ 2008. Simon an~ 978141655~ TNG    &lt;NA&gt;         11  18.9</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt;  3 Firs~ John ~ 1997. Pocket B~ 978074345~ TNG    &lt;NA&gt;         13  23.6</span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;  4 Slin~ Willi~ 2008. Simon an~ 1416550224 TNG    &lt;NA&gt;          8  23.8</span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;  5 Typh~ Chris~ 2012. Gallery ~ 978145165~ TNG    Typhon P~    14  25.3</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt;  6 Lust~ Paula~ 2015. Pocket B~ 978147677~ DS9    &lt;NA&gt;         16  25.5</span></a>
<a class="sourceLine" id="cb2-15" title="15"><span class="co">#&gt;  7 Slin~ Rober~ 2008. Simon an~ 978141655~ TNG    &lt;NA&gt;          7  25.8</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="co">#&gt;  8 Q ar~ Rudy ~ 2015. Pocket B~ 978147677~ TNG    &lt;NA&gt;         10  27.2</span></a>
<a class="sourceLine" id="cb2-17" title="17"><span class="co">#&gt;  9 Slin~ J. St~ 2008. Pocket B~ 978141655~ TNG    &lt;NA&gt;         12  27.6</span></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="co">#&gt; 10 The ~ James~ 2013. Pocket B~ 978145169~ TNG    &lt;NA&gt;          5  29.2</span></a>
<a class="sourceLine" id="cb2-19" title="19"><span class="co">#&gt; # ... with 256 more rows, and 2 more variables: nchar &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb2-20" title="20"><span class="co">#&gt; #   dedication &lt;chr&gt;</span></a></code></pre></div>
<p>Create a plot, separating each series in a different panel rather than using color to differentiate them.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">clrs &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"cornflowerblue"</span>, <span class="st">"orange"</span>, <span class="st">"purple"</span>)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">ggplot</span>(x, <span class="kw">aes</span>(date, nword, <span class="dt">color =</span> series, <span class="dt">fill =</span> series)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">"black"</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"lm"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Star Trek novel word count"</span>, <span class="dt">subtitle =</span> <span class="st">"By publication date and selected series"</span>, </a>
<a class="sourceLine" id="cb3-6" title="6">       <span class="dt">x =</span> <span class="st">"Publication date"</span>, <span class="dt">y =</span> <span class="st">"Word count (Thousand words)"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_manual</span>(<span class="dt">values =</span> clrs) <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_manual</span>(<span class="dt">values =</span> clrs) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1987</span>, <span class="dv">2018</span>, <span class="dt">by =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span>, <span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1987</span>, <span class="dv">2018</span>, <span class="dt">by =</span> <span class="dv">3</span>))</a></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex1_plot-1.png" width="100%"></p>
<p>Look at the marginal change through time in average word count (pool all three series) with a simple linear model.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span>(nword <span class="op">~</span><span class="st"> </span>date, <span class="dt">data =</span> x))</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt; lm(formula = nword ~ date, data = x)</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; Residuals:</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; -73.630 -13.805  -3.222  10.338 121.988 </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; Coefficients:</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; (Intercept) -1705.3048   446.1422  -3.822 0.000165 ***</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; date            0.8912     0.2229   3.998  8.3e-05 ***</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt; Residual standard error: 27.17 on 264 degrees of freedom</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt; Multiple R-squared:  0.05709,    Adjusted R-squared:  0.05352 </span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; F-statistic: 15.98 on 1 and 264 DF,  p-value: 8.298e-05</span></a></code></pre></div>
<p>There is about a 40% increase in average word count per novel across the three series from the the first TNG novel in 1987 through 2017. In the case of the Voyager novels, however, the average word count approximately doubles and does so over a short production run. It is worth noting that as word count has trended upward noticeably, novels from these series have also been published less frequently. If you have read many of these book in paperback form, both the oldest and the more recent ones, this should not be a surprising result. Many of the newer releases have notably more pages and smaller font than the novels from the earlier years.</p>
<p>In this next example, consider all books from all series available in <code>stBooks</code>, with the exception of Omnibus editions and those falling into the reference category. This example looks at cumulative total word count over time for all the selected books. For plot labeling purposes, this time divide the word count by one million.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">x &lt;-<span class="st"> </span><span class="kw">mutate</span>(stBooks, <span class="dt">date =</span> <span class="kw">decimal_date</span>(<span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(date)), <span class="dt">nword =</span> nword <span class="op">/</span><span class="st"> </span><span class="fl">1e6</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(series <span class="op">!=</span><span class="st"> "REF"</span> <span class="op">&amp;</span><span class="st"> </span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"Omnibus"</span>, title)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="st">  </span><span class="kw">arrange</span>(date) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">total_words =</span> <span class="kw"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span>(nword))</a>
<a class="sourceLine" id="cb5-5" title="5"></a>
<a class="sourceLine" id="cb5-6" title="6">x</a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; # A tibble: 732 x 12</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt;    title author  date publisher identifier series subseries nchap  nword</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt;    &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;  1 Bant~ James~ 1967  Amereon ~ 978084880~ TOS    &lt;NA&gt;         NA 0.0411</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt;  2 Bant~ James~ 1968. Amereon ~ 978084880~ TOS    &lt;NA&gt;         NA 0.0405</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt;  3 Bant~ James~ 1969. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0389</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt;  4 Bant~ James~ 1970. Bantam B~ 978055310~ TOS    &lt;NA&gt;          9 0.0361</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt;  5 Bant~ James~ 1971. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0416</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt;  6 Bant~ James~ 1972. Bantam B~ 978055314~ TOS    &lt;NA&gt;         NA 0.0430</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt;  7 Bant~ James~ 1972. Bantam B~ 978055313~ TOS    &lt;NA&gt;         NA 0.0428</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt;  8 Bant~ James~ 1972. Bantam B~ 978055313~ TOS    &lt;NA&gt;         NA 0.0464</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt;  9 Bant~ James~ 1973. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0533</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; 10 Bant~ James~ 1974. Bantam B~ 978055312~ TOS    &lt;NA&gt;         NA 0.0533</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; # ... with 722 more rows, and 3 more variables: nchar &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt; #   dedication &lt;chr&gt;, total_words &lt;dbl&gt;</span></a></code></pre></div>
<p>The plot will be labeled with series abbreviations, so a key is needed for clarity. In order to label points on the plot marking the onset of a new novel series, take the first entry in the data frame for each series. A bit of theme customization is required for the table grid object that will display the key as an inset figure.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">tab_theme &lt;-<span class="st"> </span>gridExtra<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/gridExtra/man/tableGrob.html">ttheme_default</a></span>(</a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="dt">core =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">fg_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">cex =</span> <span class="fl">0.5</span>), <span class="dt">padding =</span> <span class="kw">unit</span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="st">"mm"</span>)), </a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">colhead =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">fg_params =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">cex =</span> <span class="fl">0.5</span>)))</a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5">series &lt;-<span class="st"> </span><span class="kw">group_by</span>(x, series) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">  </span><span class="kw">inner_join</span>(stSeries, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"series"</span> =<span class="st"> "abb"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">  </span><span class="kw">select</span>(series, id, date, total_words)</a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9">series</a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt; # A tibble: 20 x 4</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt;    series id                                        date total_words</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;                                    &lt;dbl&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt;  1 AV     Abramsverse                              2009.     41.4   </span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt;  2 CT     Tales from the Captain's Table Anthology 1998.     17.4   </span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt;  3 DS9    Deep Space Nine                          1993.      8.97  </span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#&gt;  4 DSC    Discovery                                2018.     52.1   </span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">#&gt;  5 ENT    Enterprise                               2002.     24.5   </span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">#&gt;  6 KE     Klingon Empire                           2004.     30.1   </span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">#&gt;  7 MISC   Miscellaneous                            1995.     11.7   </span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">#&gt;  8 NF     New Frontier                             1997.     15.7   </span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">#&gt;  9 SCE    Starfleet Corps of Engineers             2001.     22.2   </span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">#&gt; 10 SGZ    Stargazer                                2002.     25.6   </span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">#&gt; 11 SKR    Seekers                                  2015.     48.1   </span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">#&gt; 12 SNW    Strange New Worlds Anthology             1998.     17.5   </span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="co">#&gt; 13 ST     All-Series/Crossover                     2000.     20.6   </span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="co">#&gt; 14 SV     Shatnerverse                             1998.     17.2   </span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="co">#&gt; 15 TLE    The Lost Era                             2004.     28.5   </span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="co">#&gt; 16 TNG    The Next Generation                      1988.      4.01  </span></a>
<a class="sourceLine" id="cb6-29" title="29"><span class="co">#&gt; 17 TOS    The Original Series                      1967       0.0411</span></a>
<a class="sourceLine" id="cb6-30" title="30"><span class="co">#&gt; 18 TTN    Titan                                    2005.     34.0   </span></a>
<a class="sourceLine" id="cb6-31" title="31"><span class="co">#&gt; 19 VAN    Vanguard                                 2006.     34.7   </span></a>
<a class="sourceLine" id="cb6-32" title="32"><span class="co">#&gt; 20 VOY    Voyager                                  1996.     13.2</span></a>
<a class="sourceLine" id="cb6-33" title="33"></a>
<a class="sourceLine" id="cb6-34" title="34">key &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(series, <span class="kw">tibble</span>(<span class="dt">series =</span> <span class="st">"YA-"</span>, <span class="dt">id =</span> <span class="st">"Young adult books"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-35" title="35"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">id =</span> <span class="kw"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span>(<span class="st">" Anthology"</span>, <span class="st">""</span>, id)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-36" title="36"><span class="st">  </span><span class="kw">select</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-37" title="37"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Label"</span>, <span class="st">"Onset of book series"</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-38" title="38"><span class="st">  </span><span class="kw">tableGrob</span>(<span class="dt">rows =</span> <span class="ot">NULL</span>, <span class="dt">theme =</span> tab_theme)</a></code></pre></div>
<p>Finally, create the plot.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">brks &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1967</span>, <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1970</span>, <span class="dv">2015</span>, <span class="dt">by =</span> <span class="dv">5</span>), <span class="dv">2018</span>)</a>
<a class="sourceLine" id="cb7-2" title="2"></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">ggplot</span>(x, <span class="kw">aes</span>(date, total_words)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">geom_step</span>(<span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">"gray30"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">data =</span> series, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">fill =</span> <span class="st">"#FF3030"</span>, <span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="st">  </span><span class="kw">geom_label_repel</span>(<span class="dt">data =</span> series, <span class="kw">aes</span>(<span class="dt">label =</span> series), <span class="dt">color =</span> <span class="st">"white"</span>, <span class="dt">fill =</span> <span class="st">"#FF3030CC"</span>, </a>
<a class="sourceLine" id="cb7-7" title="7">                   <span class="dt">segment.color =</span> <span class="st">"black"</span>, <span class="dt">fontface =</span> <span class="st">"bold"</span>, <span class="dt">label.size =</span> <span class="ot">NA</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">"Star Trek novel cumulative word count"</span>, </a>
<a class="sourceLine" id="cb7-9" title="9">       <span class="dt">subtitle =</span> <span class="st">"By publication date, excluding reference and omnibus titles"</span>, </a>
<a class="sourceLine" id="cb7-10" title="10">       <span class="dt">x =</span> <span class="st">"Publication date"</span>, </a>
<a class="sourceLine" id="cb7-11" title="11">       <span class="dt">y =</span> <span class="st">"Cumulative word count (Million words)"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">expand =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="dt">breaks =</span> brks <span class="op">+</span><span class="st"> </span><span class="fl">0.5</span>, <span class="dt">labels =</span> brks) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">expand =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="st">  </span><span class="kw">coord_cartesian</span>(<span class="dt">xlim =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1966.5</span>, <span class="dv">2019</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="st">  </span><span class="kw">annotation_custom</span>(key, <span class="dt">xmin =</span> <span class="dv">2007</span>, <span class="dt">ymax =</span> <span class="dv">35</span>)</a></code></pre></div>
<p><img src="ex-word-count_files/figure-html/ex2_plot-1.png" width="100%"></p>
<p>The golden age of licensed Star Trek novel publishing is clear. The 1990s and 2000s saw the creation of many new series as well of regular publication of new novels from existing ones. The current trajectory appears similar to the early 1990s, at least in terms of total words written.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://leonawicz.github.io/">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
